#!/usr/bin/env python

import sys

def usage():
    if len(sys.argv) < 4:
        print("Usage: <program> <inputFile> <annFile> <outFile>")
        sys.exit(0)

def make_snpDict(annFile):
    snpDict = {}
    with open(annFile, 'r') as ann:
        for line in ann:
            line = line.strip().split()
            snpDict[int(line[0])] = line[1:]
    return snpDict

def annotate_file(snpDict, inputFile, outFile):
    with open(inputFile, 'r') as infile, open(outFile, 'w') as outfile:
        next(infile)
        for line in infile:
            line = line.strip().split('\t')
            pos = int(line[1])
            if pos in snpDict:
                outfile.write("\t".join(line) + '\t' + "\t".join(snpDict[pos]) + '\n')
            else:
                outfile.write("\t".join(line) + '\t' + "intergenic" + '\tNA\tNA\tNA\tNA\tNA\n')

usage()
inputFile, annFile, outFile = sys.argv[1:]
snpDict = make_snpDict(annFile)
annotate_file(snpDict, inputFile, outFile)
